<!DOCTYPE html>

<html>

<head>
	<title>Voter</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="stylesheet" href="assets/css/main1.css">
		<style type="text/css">
		* { padding: 0px; margin: 0px; }
		#textbox {
			width: 500px;
			-moz-padding-start: 1px;
			-moz-padding-end: 1px;
			}
		#textarea {
			 width: 500px;
			 padding: 1px;
			 }
		 </style>

		<style>
		input[type=number] {
    width: 100%;
    padding: 12px 20px;
    margin: 8px 0;
		border-radius: 4px;
		border: solid 1px rgba(0, 0, 0, 0.5);
    /* box-sizing: border-box;
    border-color: #616168; */
    background-color: rgba(143, 132, 132, 0.2);
    color: #000000;
		width: 80%;
	}

	</style>


<!-- 	<script src="list.js"></script> -->
	<script src="https://www.gstatic.com/firebasejs/4.10.0/firebase.js"></script>
	<script type="text/javascript">


			var voters ={
				"9898989898":{
							username: "yohaan",
							pin: "town",
							number: "9898989898",
							money: 500
						}
			};

			var ideas = {

				aqua:{
					codename: "aqua",
					funding: 0

				}

			};

	   	var config = {
		    apiKey: "AIzaSyDMXlxvMNGvaIO6muORFrwwqZPkIsnVhWQ",
		    authDomain: "ictechnicalteamisthebest.firebaseapp.com",
		    databaseURL: "https://ictechnicalteamisthebest.firebaseio.com",
		    projectId: "ictechnicalteamisthebest",
		    storageBucket: "ictechnicalteamisthebest.appspot.com",
		    messagingSenderId: "553171014592"
	 	 };

		  firebase.initializeApp(config);

		  var database = firebase.database();

		  function pushit(number,idea){



				  	var pushitdata = window.voters[number];
				  	var pushidea = window.ideas[idea];
				  	var updates = {};
					updates['/voters/' + number] = pushitdata;
					updates['/ideas/' + idea] = pushidea;
					// alert('Created Successfully');

					return firebase.database().ref().update(updates);
		  }



	 // function pullit(){


	  		var pinRef = firebase.database().ref("/voters/");
			pinRef.once('value').then(function(snapshot){
				var avoter =  snapshot.val();
				window.voters = avoter;
			});

			var pinRef = firebase.database().ref("/ideas/");
			pinRef.once('value').then(function(snapshot){
				var anidea =  snapshot.val();
				window.ideas = anidea;
			});

			for(var key in ideas){
				var opt = document.createElement('option');
				opt.value = key.codename;
				opt.textContent = key.codename;
				//document.getElementById('mySelect').appendChild(opt);
	  		}


	  //}

	  //voters = pullit();

	</script>
</head>

<body>
	<div class="Heading" id="Heading">
		<h2 style="color :white !important;"><center> Crowd Funding </center></h2>
	</div>


	<div style="margin-left : 10%; color:#000000; ">
	<!-- <input type="text" placeholder="name" id="username"> -->
		<div id="HideLogin">
			<label style="color: black; ">Enter Your UID: </label>
			<input maxlength="10" minlength="10" placeholder="mobile number" id="num" style="margin-bottom: 2%;width:90%!important;" type="text">
			<label style="color: black; ">Enter Your Mobile Number : </label>
			<input maxlength="10" minlength="10" placeholder="passcode/pin" id="pin" style="margin-bottom: 2%;width:90%!important;" type="password">
			<input onclick="checkUser()" style="width: 90%;" type="submit" value="Login">
		</div>


	<div class="output" id="out" style="display: none;">

		<div class="Name" id="name"> </div>
		<br>
		<div class="UserMoney" id="userMoney"> </div>
		<br>
		<div id="opt">
			<input type="submit" value="About" onclick="about()" style="width: 42%!important; margin-right: 5%">
			<input type="submit" value="Invest" onclick="vote()" style="width: 42%!important; ">
		</div>
		<br>
	<div id="ts">
		<div class="trigger"></div>


	</div>
	<div id="Idea">
		<h1>Bus Tracker</h1>
		<p>The app provides tracking information based on Google
			coordinates and mobile GPS (online). Satellite connectivity is not required. People can track
			which bus stop was crossed last by the bus they are waiting for and/or know the last time
			the bus reached the current bus stop they are standing at. Currently the application is
			being built for Mumbai region. B.E.S.T. provides bus services all over Mumbai.</p>
		<h1>Daily Dawat</h1>
		<p>Daily Daawat is an online meal kit
			delivery platform that provides not
			only gourmet meals but also menus
			with 'ghar ka khana' for daily
			consumption.</p>
		<h1>Pharmastar</h1>
		<p>To connect the three key dots of healthcare industry viz. Doctor-patient-pharmacist through digital prescription. Make the prescription flow paperless. And reduce the burden of maintaining prescription file for patients.</p>
		<h1>TEC</h1>
		<p>TEC is a startup that is working to change the face of Indian Education.  TEC stands for THINK, EXPLORE and CREATE, and that is what we encourage and equip our students to </p>
		<h1>Hydragons</h1>
		<p>Search Engine dedicated for Downloads. One click to all downloads</p>
		<h1>Smart Store</h1>
		<p>The retail industry is on a decline due to the sudden advent and an attempted market capture by the e-commerce websites. The proposed project smart.store aims to reduce </p>
		<h1>Sphero Details</h1>
		<p>We aim to develop a system which has minimum ground contact resulting in minimum friction
			with the ground and zero degree turning radius i.e. it has a single point axial rotation. It can be
			used for surveillance in hazardous environmental environment, for land exploration in
			environment such as low gravity, underwater, irregular terrains,etc.
		</p>
		<h1>Artistik India.com</h1>
		<p> The app provides tracking information based on Google
			coordinates and mobile GPS (online). Satellite connectivity is not required. People can track
			which bus stop was crossed last by the bus they are waiting for and/or know the last time
			the bus reached the current bus stop they are standing at. Currently the application is
			being built for Mumbai region. B.E.S.T. provides bus services all over Mumbai.</p>
		<h1>Bharat_Osmo_energy</h1>
		<p>Sucrose is a high volume commodity which finds wide utility in the food and beverage sector. Global production in 2017-2018 is projected to be of the order of 185 million </p>
		<h1>TSEC</h1>
		<p>Geolocation based timestamp based accurate prediction of check in places.facebook recruiting challenge from kaggle website</p>
		<!--<p>The purpose of this project is to predict places with greater efficacy by contemplating various-->
			<!--other features such as timestamp of the user along with density of places at that point of time.-->
			<!--To solve this problem, Facebook has created an artificial world comprising of more than-->
			<!--100,000 places located in a 10 x 10 km square. It contains two csv files viz; Train and Test.-->
			<!--Train dataset comprises of user co-ordinates along with timestamp, accuracy as features and-->
			<!--place_id as label. For a given set of coordinates, task is to return a ranked list of the most likely-->
			<!--places user can make check-in.-->
		<!--</p>-->
		<h1>Disha</h1>
		<p>Teaching Aid Cum Integrated Solution for Differently Able</p>

	</div>

		<div id="HidePayment">
		<h1>Let's Invest!</h1>
		<p>Enter the codename for the idea you will invest in:</p>
		<select name="codename" id="codename" style="width: 90%;">
							 <option value="Smart_apps">Bus Tracker</option>
							 <option value="DailyDawat">Daily Dawat</option>
							 <option value="Pharmsters">Phrmastar</option>
							 <option value="TEC">TEC</option>
							 <option value="Hydrogens">Hydragons</option>
							 <option value="Smart_Store">Smart Store</option>
							 <option value="Sphero_Details">Sphero Details</option>
							 <option value="Artistik_Indiacom">Artistic India.com</option>
							 <option value="Bharat_Osmo_energy">Bharat Osmo energy</option>
							 <option value="TSEC">TSEC</option>
			 				 <option value="Disha">Disha</option>
		</select>
		<br>
		<!-- <input id="codename"> -->
		<p>How much will you invest?</p>
		<input type="number" id="points" style="width: 90%;">
		<br>
		<input type="submit" onclick="letsVote()" style="width: 90%;margin-top: 5%;" value="Pay">
		<ul id="ideasList"></ul>
	</div>

	<div id="Vote_Again">
		<input type="submit" value="Vote Again" onclick="voteagain()" style="width: 90%;margin-top: 5%;">
	</div>

	</div>
	</div>

	<div id="showit"></div>
	                <div class="Errors" id="Error" style="margin-left:10%; ">
                    <!--<div id="Invalid_Number">-->
                    <!--<br>-->
                    <!--<label>Invalid Username</label>-->
                    <!--</div>-->
		 <div id="Invalid_Id">
                        <br>
                        <label style="color: black;"> Invalid UID. Make Sure Your UID is of 10 Digits. Refresh the page and try again.</label>
                    </div>
                    <div id="Invalid_Credentials">
                        <br>
                        <label style="color: black; ">Invalid password. Make sure you have entered your registerd  Mobile number.If problem persists contact any of the volunteers around.Refresh the page and try again.</label>
                    </div>

                    <div id="Not_Enough_Money">
                        <br>
                        <label style="color: black;"> Sorry, you don't have enough money.</label>
                    </div>

                    <div id="Less_than_0">
                        <br>
                        <label style="color: black;"> Please enter a value greater than 0.</label>
                    </div>

                    <div id="Invalid_input">
                        <br>
                        <label style="color: black;"> Please enter a valid input.</label>
                    </div>
					<div id="less">
                        <br>
                        <label style="color: black;"> You Don't Have Enough Money.</label>
                    </div>
					<div id="zero">
                        <br>
                        <label style="color: black;"> Enter Value greater than zero.</label>
                    </div>

                </div>




	<!-- <script src="list.js"></script> -->
	<script>
	  // Initialize Firebase -->


	  var myMoney;

	  var myReturn = 0;
	  var x =0;
	  var y = 0;
	  var pin = 0;
	  var myPin = 1;
	  var boool = 1;
	  document.getElementById("zero").style.display = "none";
		document.getElementById("Invalid_Id").style.display = "none";
		document.getElementById("less").style.display = "none";
		document.getElementById("out").style.display = "none";
		document.getElementById("out").style.display = "none";
        document.getElementById("Invalid_Credentials").style.display = "none";
        document.getElementById("Not_Enough_Money").style.display = "none";
        document.getElementById("Less_than_0").style.display = "none";
        document.getElementById("Invalid_input").style.display = "none";

	function checkUser() {

				  // var username = document.getElementById("username").value;
				try{
					var x = parseInt(document.getElementById('num').value);
					var y = parseInt(window.voters[parseInt(document.getElementById('num').value)].number);
				}
				catch(e)
				{
					alert("Entered UID is Wrong Make Sure You Enter 10 Digit UID");
				}

				if(x !=  y)
				{
					document.getElementById("Invalid_Id").style.display = "block";
					boool = 0;
				}
				else if(x == y)
 				{
					pin = document.getElementById("pin").value;
					var number = document.getElementById("num").value;
					myPin = window.voters[number].pin;
					var Uname = window.voters[number].name;
					var User_Money = window.voters[number].money;
					var output = document.getElementsByClassName("output");
					document.getElementById("Invalid_Id").style.display = "none";
				}
				if(boool == 1)
				{
					if(myPin==pin){
							myReturn = 1;
							alert("You are verified!");
							document.getElementById("Invalid_Id").style.display = "none";
							document.getElementById("out").style.display = "block";
							document.getElementById("HideLogin").style.display="none";
							document.getElementById("Idea").style.display="none";
							document.getElementById("HidePayment").style.display="none";
							document.getElementById("Vote_Again").style.display="none";
							document.getElementById("name").innerHTML = "Hi, " + Uname;
							document.getElementById("userMoney").innerHTML = "My Money : " + User_Money;
							document.getElementById("opt").style.display = "block";
							document.getElementById("Invalid_Credentials").style.display = "none";
							document.getElementById("Not_Enough_Money").style.display = "none";
							document.getElementById("Less_than_0").style.display = "none";
							document.getElementById("Invalid_input").style.display = "none";
							// window.location = 'VoterPay.html?number='+number+'&pin='+pin;
				  	}
				  	else{
				  		document.getElementById("Invalid_Credentials").style.display = "block";
						document.getElementById("Not_Enough_Money").style.display = "none";
						document.getElementById("Less_than_0").style.display = "none";
						document.getElementById("Invalid_input").style.display = "none";
						myReturn = 0;
				  	}
				}
		}

		function about() {
			//alert("You cliked About");
			document.getElementById("HidePayment").style.display="none";
			document.getElementById("Idea").style.display="block";
		}

		function vote() {
			//alert("You clicked vote");
			document.getElementById("Idea").style.display="none";
			document.getElementById("HidePayment").style.display="block";
		}

		function letsVote(){
					var number = document.getElementById("num").value;
					var out = document.getElementById("out");
                    document.getElementById("Less_than_0").style.display = "none";
					document.getElementById("Not_Enough_Money").style.display = "none";
					var codename = document.getElementById("codename").value;
					var points = parseInt(document.getElementById("points").value);
					var mymoney = parseInt(window.voters[number].money);
					//out.style.display = "block";
					//myList = document.getElementById("ideasList");
					//alert(window.voters[number].money);
            		// alert(points);
            		// document.write(mymoney);
					if(points > mymoney)
					{
					    document.getElementById("less").style.display = "block";

					}

					else if (points <= 0)
					{
						document.getElementById("zero").style.display = "block";

					}

					else if(points <= mymoney)
					{
                        mymoney-= points;
						alert(mymoney);
						//alert("Transction succesful!");
                        var myfunds = parseInt(window.voters[number].vote[codename]);
                        //alert("vote node exists");
                        myfunds += points;
                        //alert("increment worked");
                        window.voters[number].money = mymoney;
                        //alert("assigned decrement ");
                        window.voters[number].vote[codename] = myfunds;
                        //alert("assigned increment value");
                        pushit(number, codename);
                        //alert("push succesful");
						//var sccs = "<p>Voting was succesful!</p>";
						//document.getElementById("showit").innerHTML = sccs;
						document.getElementById("HidePayment").style.display="none";
						document.getElementById("zero").style.display = "none";
						document.getElementById("less").style.display = "none";
						document.getElementById("Vote_Again").style.display="block";
                        document.getElementById("userMoney").innerHTML = "My Money : " + mymoney;
					}
					else {
                        alert("You Don't Have Enough Money !! OR There IS some problem");
					}
		}


		function voteagain() {
			document.getElementById("HidePayment").style.display="block";
            document.getElementById("Vote_Again").style.display="none";
		}
	/*<!-- // var showit = document.getElementById("showit");*/

	// showit.innerHTML = voters; -->


	</script>



</body>
</html>
